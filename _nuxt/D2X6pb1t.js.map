{"version":3,"file":"D2X6pb1t.js","sources":["../../../../pages/notes/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport type { QueryBuilderParams } from '@nuxt/content/types';\n\nconst route = useRoute();\nconst categoryParam = route.query.category;\n\nlet page = 0;\nconst limit = 5;\nconst query = { published: true };\nif (categoryParam) Object.assign(query, { tags: categoryParam });\nconst total = (await queryContent('en/articles').only([]).where(query).find()).length;\nconst { data: articles, refresh } = await useAsyncData('posts', () =>\n  queryContent('en/articles').where(query).sort({ date: -1 }).skip(page).limit(limit).find(),\n);\n\nconst recentPosts: QueryBuilderParams = {\n  path: '/en/articles',\n  where: [query],\n  limit: 15,\n  sort: [{ date: -1 }],\n};\n\nconst { data } = await useAsyncData('/', () => queryContent('/').findOne());\nconst categories = computed(() => data?.value?.notes.categories || []);\n\nfunction refetch(pageNumber: number) {\n  page += pageNumber;\n  refresh();\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n}\n</script>\n\n<template>\n  <PageSection>\n    <PageTitle text=\"Notes\" subtitle=\" Articles and Advice\" />\n\n    <div class=\"container flex gap-8\">\n      <div>\n        <div class=\"flex flex-col gap-4\">\n          <note-list-article-item\n            v-for=\"article in articles\"\n            :key=\"article.id\"\n            :article=\"article\"\n          />\n        </div>\n\n        <div class=\"text-center mt-8\">\n          <v-btn\n            v-if=\"page > 0\"\n            variant=\"flat\"\n            class=\"bg-white\"\n            @click=\"refetch(-5)\"\n            >prev</v-btn\n          >\n          <span class=\"ml-5\"></span>\n          <v-btn\n            v-if=\"page + limit < total\"\n            class=\"bg-white\"\n            variant=\"flat\"\n            @click=\"refetch(5)\"\n            >next</v-btn\n          >\n        </div>\n      </div>\n\n      <div class=\"w-1/2\">\n        <aside class=\"border-l-2 border-[rgba(0,0,0,.1)] pl-4\">\n          <section class=\"pb-10\">\n            <h2 class=\"uppercase text-emerald-600\">Recent Posts</h2>\n            <ContentList :query=\"recentPosts\">\n              <template #not-found>\n                <p>No articles found.</p>\n              </template>\n\n              <template #default=\"{ list }\">\n                <ul>\n                  <li v-for=\"article of list\" :key=\"article._path\">\n                    <NuxtLink :to=\"'/notes' + article._path\">\n                      {{ article.title }}\n                    </NuxtLink>\n                  </li>\n                </ul>\n              </template>\n            </ContentList>\n          </section>\n\n          <section class=\"pb-10\">\n            <h2 class=\"uppercase text-emerald-600\">Categories</h2>\n            <ContentList :query=\"recentPosts\">\n              <template #not-found>\n                <p>No categories found.</p>\n              </template>\n\n              <template #default>\n                <ul>\n                  <li v-for=\"category of categories\" :key=\"category.path\">\n                    <NuxtLink :to=\"'/notes/categories/' + category.path\">\n                      {{ category.title }}\n                    </NuxtLink>\n                  </li>\n                </ul>\n              </template>\n            </ContentList>\n          </section>\n        </aside>\n      </div>\n    </div>\n  </PageSection>\n</template>\n"],"names":["limit","categoryParam","useRoute","page","query","total","__temp","__restore","_withAsyncContext","queryContent","articles","refresh","useAsyncData","recentPosts","data","categories","computed","_a","refetch","pageNumber"],"mappings":"gnBAOMA,EAAQ,8CAHR,MAAAC,EADQC,IACc,MAAM,SAElC,IAAIC,EAAO,EAEL,MAAAC,EAAQ,CAAE,UAAW,IACvBH,GAAsB,OAAA,OAAOG,EAAO,CAAE,KAAMH,EAAe,EACzD,MAAAI,GAAe,CAAAC,EAAAC,CAAA,EAAAC,EAAA,IAAAC,EAAa,aAAa,EAAE,KAAK,CAAA,CAAE,EAAE,MAAML,CAAK,EAAE,KAAK,CAAA,mBAAG,OACzE,CAAE,KAAMM,EAAU,QAAAC,CAAQ,GAAU,CAAAL,EAAAC,CAAA,EAAAC,EAAA,IAAAI,EAAa,QAAS,IAC9DH,EAAa,aAAa,EAAE,MAAML,CAAK,EAAE,KAAK,CAAE,KAAM,EAAI,CAAA,EAAE,KAAKD,CAAI,EAAE,MAAMH,CAAK,EAAE,KAAK,CAAA,CAC3F,mBAEMa,EAAkC,CACtC,KAAM,eACN,MAAO,CAACT,CAAK,EACb,MAAO,GACP,KAAM,CAAC,CAAE,KAAM,GAAI,CAAA,EAGf,CAAE,KAAAU,CAAe,GAAA,CAAAR,EAAAC,CAAA,EAAAC,EAAA,IAAAI,EAAa,IAAK,IAAMH,EAAa,GAAG,EAAE,QAAS,CAAA,CAAA,mBACpEM,EAAaC,EAAS,WAAM,QAAAC,EAAAH,GAAA,YAAAA,EAAM,QAAN,YAAAG,EAAa,MAAM,aAAc,CAAA,EAAE,EAErE,SAASC,EAAQC,EAAoB,CAC3BhB,GAAAgB,EACAR,IACR,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,SAAU,CAChD"}