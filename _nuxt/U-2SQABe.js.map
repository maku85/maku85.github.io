{"version":3,"file":"U-2SQABe.js","sources":["../../../../pages/notes/categories/[slug].vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport type { QueryBuilderParams } from '@nuxt/content/types';\n\nconst route = useRoute();\nconst categoryParam = route.params.slug;\n\nlet page = 0;\nconst limit = 5;\nconst query = { published: true };\nif (categoryParam) Object.assign(query, { tags: { $contains: categoryParam } });\nconst total = (await queryContent('en/articles').only([]).where(query).find()).length;\nconst { data: articles, refresh } = await useAsyncData('posts', () =>\n  queryContent('en/articles').where(query).sort({ title: 1 }).skip(page).limit(limit).find(),\n);\n\nconst recentPosts: QueryBuilderParams = {\n  path: '/en/articles',\n  where: [{ published: true }],\n  limit: 15,\n  sort: [{ title: 1 }],\n};\n\nconst { data } = await useAsyncData('settings', () => queryContent('/').findOne());\nconst categories = computed(() => data?.value?.notes.categories || []);\n\nfunction refetch(pageNumber: number) {\n  page += pageNumber;\n  refresh();\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n}\n</script>\n\n<template>\n  <PageSection id=\"articles\">\n    <PageTitle\n      :text=\"`'${categoryParam}' Notes`\"\n      subtitle=\" Articles and Advice\"\n    />\n\n    <div class=\"flex flex-col md:flex-row gap-10\">\n      <div>\n        <div class=\"flex flex-col\">\n          <note-list-article-item\n            v-for=\"article in articles\"\n            :key=\"article.id\"\n            :article=\"article\"\n          />\n        </div>\n\n        <div class=\"text-center mt-8\">\n          <button\n            v-if=\"page > 0\"\n            class=\"uppercase bg-white py-2 px-4 rounded\"\n            @click=\"refetch(-5)\"\n          >\n            prev\n          </button>\n          <span class=\"ml-5\"></span>\n          <button\n            v-if=\"page + limit < total\"\n            class=\"uppercase bg-white py-2 px-4 rounded\"\n            @click=\"refetch(5)\"\n          >\n            next\n          </button>\n        </div>\n      </div>\n\n      <div class=\"min-w-[300px]\">\n        <aside class=\"border-l-2 border-[rgba(0,0,0,.1)] pl-6\">\n          <section class=\"pb-10\">\n            <h2 class=\"text-lg font-bold uppercase text-emerald-600 mb-4\">\n              Other Notes\n            </h2>\n            <ContentList :query=\"recentPosts\">\n              <template #not-found>\n                <p>No notes found.</p>\n              </template>\n\n              <template #default=\"{ list }\">\n                <ul>\n                  <li v-for=\"article of list\" :key=\"article._path\" class=\"mb-1\">\n                    <NuxtLink :to=\"'/notes' + article._path\">\n                      <h5>- {{ article.title }}</h5>\n                    </NuxtLink>\n                  </li>\n                </ul>\n              </template>\n            </ContentList>\n          </section>\n\n          <section class=\"pb-10\">\n            <h2 class=\"text-lg font-bold uppercase text-emerald-600\">\n              Categories\n            </h2>\n            <ContentList :query=\"recentPosts\">\n              <template #not-found>\n                <p>No categories found.</p>\n              </template>\n\n              <template #default>\n                <ul class=\"mt-4\">\n                  <li\n                    v-for=\"category of categories\"\n                    :key=\"category.path\"\n                    class=\"uppercase mb-1\"\n                  >\n                    <NuxtLink :to=\"'/notes/categories/' + category.path\">\n                      #{{ category.title }}\n                    </NuxtLink>\n                  </li>\n                </ul>\n              </template>\n            </ContentList>\n          </section>\n        </aside>\n      </div>\n    </div>\n  </PageSection>\n</template>\n"],"names":["limit","categoryParam","useRoute","page","query","total","__temp","__restore","_withAsyncContext","queryContent","articles","refresh","useAsyncData","recentPosts","data","categories","computed","_a","refetch","pageNumber"],"mappings":"ulBAOMA,EAAQ,+CAHR,MAAAC,EADQC,IACc,OAAO,KAEnC,IAAIC,EAAO,EAEL,MAAAC,EAAQ,CAAE,UAAW,IACvBH,GAAsB,OAAA,OAAOG,EAAO,CAAE,KAAM,CAAE,UAAWH,CAAc,CAAA,CAAG,EACxE,MAAAI,GAAe,CAAAC,EAAAC,CAAA,EAAAC,EAAA,IAAAC,EAAa,aAAa,EAAE,KAAK,CAAA,CAAE,EAAE,MAAML,CAAK,EAAE,KAAK,CAAA,mBAAG,OACzE,CAAE,KAAMM,EAAU,QAAAC,CAAQ,GAAU,CAAAL,EAAAC,CAAA,EAAAC,EAAA,IAAAI,EAAa,QAAS,IAC9DH,EAAa,aAAa,EAAE,MAAML,CAAK,EAAE,KAAK,CAAE,MAAO,CAAG,CAAA,EAAE,KAAKD,CAAI,EAAE,MAAMH,CAAK,EAAE,KAAK,CAAA,CAC3F,mBAEMa,EAAkC,CACtC,KAAM,eACN,MAAO,CAAC,CAAE,UAAW,GAAM,EAC3B,MAAO,GACP,KAAM,CAAC,CAAE,MAAO,EAAG,CAAA,EAGf,CAAE,KAAAC,CAAe,GAAA,CAAAR,EAAAC,CAAA,EAAAC,EAAA,IAAAI,EAAa,WAAY,IAAMH,EAAa,GAAG,EAAE,QAAS,CAAA,CAAA,mBAC3EM,EAAaC,EAAS,WAAM,QAAAC,EAAAH,GAAA,YAAAA,EAAM,QAAN,YAAAG,EAAa,MAAM,aAAc,CAAA,EAAE,EAErE,SAASC,EAAQC,EAAoB,CAC3BhB,GAAAgB,EACAR,IACR,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,SAAU,CAChD"}