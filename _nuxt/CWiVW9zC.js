import{_ as E}from"./_brUl3VI.js";import{_ as z}from"./B4Uso7Ao.js";import{d as G,x as H,h as y,i as I,o as r,g as _,w as e,e as s,c as u,r as w,f as m,F as k,j as n,k as c,l as q,q as x,t as B,m as J}from"./1I5RK2Em.js";import K from"./hSFXCynS.js";import{_ as M}from"./DcyjQ7cY.js";import{u as P}from"./CQRSgUmh.js";import{V as $,a as b}from"./BDr0FKQz.js";import{V as A}from"./COeS8Otc.js";import{V as Q}from"./D4MQpSZo.js";import"./BjzUap9H.js";import"./BXXmRvTJ.js";const U={class:"text-center mt-8"},W={class:"border-l-2 border-[rgba(0,0,0,.1)] pl-4"},X={class:"pb-10"},Y={class:"pb-10"},L=5,dt=G({__name:"index",async setup(Z){let o,l;const C=H().query.category;let p=0;const d={published:!0};C&&Object.assign(d,{tags:C});const R=([o,l]=y(()=>x("en/articles").only([]).where(d).find()),o=await o,l(),o).length,{data:T,refresh:j}=([o,l]=y(()=>P("posts",()=>x("en/articles").where(d).sort({date:-1}).skip(p).limit(L).find())),o=await o,l(),o),V={path:"/en/articles",where:[d],limit:15,sort:[{date:-1}]},{data:f}=([o,l]=y(()=>P("/",()=>x("/").findOne())),o=await o,l(),o),D=I(()=>{var i;return((i=f==null?void 0:f.value)==null?void 0:i.notes.categories)||[]});function v(i){p+=i,j(),window.scrollTo({top:0,behavior:"smooth"})}return(i,t)=>{const F=E,O=z,h=J,N=K,S=M;return r(),_(S,null,{default:e(()=>[s(F,{text:"Notes",subtitle:" Articles and Advice"}),s(Q,null,{default:e(()=>[s($,null,{default:e(()=>[s(b,{cols:"12",md:"12",lg:"8"},{default:e(()=>[(r(!0),u(k,null,w(m(T),a=>(r(),_($,{key:a.id},{default:e(()=>[s(b,null,{default:e(()=>[s(O,{article:a},null,8,["article"])]),_:2},1024)]),_:2},1024))),128)),n("div",U,[m(p)>0?(r(),_(A,{key:0,variant:"flat",class:"bg-white",onClick:t[0]||(t[0]=a=>v(-5))},{default:e(()=>t[2]||(t[2]=[c("prev")])),_:1})):q("",!0),t[4]||(t[4]=n("span",{class:"ml-5"},null,-1)),m(p)+L<m(R)?(r(),_(A,{key:1,class:"bg-white",variant:"flat",onClick:t[1]||(t[1]=a=>v(5))},{default:e(()=>t[3]||(t[3]=[c("next")])),_:1})):q("",!0)])]),_:1}),s(b,{md:"12",lg:"4"},{default:e(()=>[n("aside",W,[n("section",X,[t[6]||(t[6]=n("h2",{class:"uppercase"},"Recent Posts",-1)),s(N,{query:V},{"not-found":e(()=>t[5]||(t[5]=[n("p",null,"No articles found.",-1)])),default:e(({list:a})=>[n("ul",null,[(r(!0),u(k,null,w(a,g=>(r(),u("li",{key:g._path},[s(h,{to:"/notes"+g._path},{default:e(()=>[c(B(g.title),1)]),_:2},1032,["to"])]))),128))])]),_:1})]),n("section",Y,[t[8]||(t[8]=n("h2",{class:"uppercase"},"Categories",-1)),s(N,{query:V},{"not-found":e(()=>t[7]||(t[7]=[n("p",null,"No categories found.",-1)])),default:e(()=>[n("ul",null,[(r(!0),u(k,null,w(m(D),a=>(r(),u("li",{key:a.path},[s(h,{to:"/notes/categories/"+a.path},{default:e(()=>[c(B(a.title),1)]),_:2},1032,["to"])]))),128))])]),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{dt as default};
//# sourceMappingURL=CWiVW9zC.js.map
