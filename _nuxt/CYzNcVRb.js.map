{"version":3,"file":"CYzNcVRb.js","sources":["../../../../node_modules/.pnpm/@unhead+vue@1.11.6_vue@3.5.9/node_modules/@unhead/vue/dist/index.mjs","../../../../components/Note/ArticleToc.vue","../../../../pages/notes/[lang]/articles/[slug].vue"],"sourcesContent":["import { useScript as useScript$1 } from 'unhead';\nexport { CapoPlugin, HashHydrationPlugin, createHeadCore } from 'unhead';\nimport { i as injectHead, h as headSymbol, V as Vue3 } from './shared/vue.f49591ad.mjs';\nexport { c as createHead, a as createServerHead, r as resolveUnrefHeadInput, s as setHeadInjectionHandler } from './shared/vue.f49591ad.mjs';\nimport { composableNames, whitelistSafeInput, unpackMeta } from '@unhead/shared';\nimport { u as useHead } from './shared/vue.8fc199ce.mjs';\nimport { getCurrentInstance, onMounted, isRef, watch, onScopeDispose, ref } from 'vue';\n\nconst coreComposableNames = [\n  \"injectHead\"\n];\nconst unheadVueComposablesImports = {\n  \"@unhead/vue\": [...coreComposableNames, ...composableNames]\n};\n\nfunction useHeadSafe(input, options = {}) {\n  return useHead(input, { ...options, transform: whitelistSafeInput });\n}\n\nfunction registerVueScopeHandlers(script, scope) {\n  if (!scope) {\n    return;\n  }\n  const _registerCb = (key, cb) => {\n    if (!script._cbs[key]) {\n      cb(script.instance);\n      return () => {\n      };\n    }\n    let i = script._cbs[key].push(cb);\n    const destroy = () => {\n      if (i) {\n        script._cbs[key]?.splice(i - 1, 1);\n        i = null;\n      }\n    };\n    onScopeDispose(destroy);\n    return destroy;\n  };\n  script.onLoaded = (cb) => _registerCb(\"loaded\", cb);\n  script.onError = (cb) => _registerCb(\"error\", cb);\n}\nfunction useScript(_input, _options) {\n  const input = typeof _input === \"string\" ? { src: _input } : _input;\n  const options = _options || {};\n  const head = options?.head || injectHead();\n  options.head = head;\n  const scope = getCurrentInstance();\n  options.eventContext = scope;\n  if (scope && typeof options.trigger === \"undefined\") {\n    options.trigger = onMounted;\n  } else if (isRef(options.trigger)) {\n    const refTrigger = options.trigger;\n    let off;\n    options.trigger = new Promise((resolve) => {\n      off = watch(refTrigger, (val) => {\n        if (val) {\n          resolve(true);\n        }\n      }, {\n        immediate: true\n      });\n      onScopeDispose(() => resolve(false), true);\n    }).then((val) => {\n      off?.();\n      return val;\n    });\n  }\n  head._scriptStatusWatcher = head._scriptStatusWatcher || head.hooks.hook(\"script:updated\", ({ script: s }) => {\n    s._statusRef.value = s.status;\n  });\n  const script = useScript$1(input, options);\n  script._statusRef = script._statusRef || ref(script.status);\n  registerVueScopeHandlers(script, scope);\n  return new Proxy(script, {\n    get(_, key, a) {\n      return Reflect.get(_, key === \"status\" ? \"_statusRef\" : key, a);\n    }\n  });\n}\n\nfunction useSeoMeta(input, options) {\n  const { title, titleTemplate, ...meta } = input;\n  return useHead({\n    title,\n    titleTemplate,\n    // @ts-expect-error runtime type\n    _flatMeta: meta\n  }, {\n    ...options,\n    transform(t) {\n      const meta2 = unpackMeta({ ...t._flatMeta });\n      delete t._flatMeta;\n      return {\n        // @ts-expect-error runtime type\n        ...t,\n        meta: meta2\n      };\n    }\n  });\n}\n\nfunction useServerHead(input, options = {}) {\n  const head = options.head || injectHead();\n  delete options.head;\n  if (head)\n    return head.push(input, { ...options, mode: \"server\" });\n}\n\nfunction useServerHeadSafe(input, options = {}) {\n  return useHeadSafe(input, { ...options, mode: \"server\" });\n}\n\nfunction useServerSeoMeta(input, options) {\n  return useSeoMeta(input, { ...options, mode: \"server\" });\n}\n\nconst Vue2ProvideUnheadPlugin = (_Vue, head) => {\n  _Vue.mixin({\n    beforeCreate() {\n      const options = this.$options;\n      const origProvide = options.provide;\n      options.provide = function() {\n        let origProvideResult;\n        if (typeof origProvide === \"function\")\n          origProvideResult = origProvide.call(this);\n        else\n          origProvideResult = origProvide || {};\n        return {\n          ...origProvideResult,\n          [headSymbol]: head\n        };\n      };\n    }\n  });\n};\n\nconst VueHeadMixin = {\n  created() {\n    let source = false;\n    if (Vue3) {\n      const instance = getCurrentInstance();\n      if (!instance)\n        return;\n      const options = instance.type;\n      if (!options || !(\"head\" in options))\n        return;\n      source = typeof options.head === \"function\" ? () => options.head.call(instance.proxy) : options.head;\n    } else {\n      const head = this.$options.head;\n      if (head) {\n        source = typeof head === \"function\" ? () => head.call(this) : head;\n      }\n    }\n    source && useHead(source);\n  }\n};\n\nexport { Vue2ProvideUnheadPlugin, VueHeadMixin, injectHead, unheadVueComposablesImports, useHead, useHeadSafe, useScript, useSeoMeta, useServerHead, useServerHeadSafe, useServerSeoMeta };\n","<script setup>\ndefineProps({\n  links: {\n    type: Array,\n    required: true,\n  },\n});\n\nconst flattenLinks = (links) => {\n  const _links = (links || []).flatMap((link) => {\n    let _link = [link];\n    if (link.children) {\n      const flattened = flattenLinks(link.children);\n      _link = [link, ...flattened];\n    }\n    return _link;\n  });\n  return _links;\n};\n</script>\n\n<template>\n  <nav>\n    <header>\n      <h2 class=\"toc__title uppercase\">Table of contents</h2>\n    </header>\n\n    <ul class=\"toc__links-container\">\n      <li\n        v-for=\"link of flattenLinks(links)\"\n        :key=\"link.id\"\n        :class=\"`toc__link-wrapper toc__link-wrapper--${link.depth}`\"\n      >\n        <NuxtLink class=\"toc__link\" :to=\"'#' + link.id\">{{\n          link.text\n        }}</NuxtLink>\n      </li>\n    </ul>\n  </nav>\n</template>\n","<script lang=\"ts\" setup>\nconst route = useRoute();\nconst { lang, slug } = route.params;\nconst { data } = await useAsyncData(`article-${slug}`, async () => {\n  const article = queryContent(lang as string, 'articles')\n    .where({ _path: `/${lang}/articles/${slug}` })\n    .findOne();\n\n  const surround = queryContent()\n    .only(['_path', 'title', 'description'])\n    .sort({ date: 1 })\n    .findSurround(`/${lang}/articles/${slug}`);\n  return {\n    article: await article,\n    surround: await surround,\n  };\n});\nconst article = data?.value?.article;\nconst [prev, next] = data?.value?.surround || [];\n\nuseSeoMeta({\n  title: article?.title,\n  ogTitle: article?.title,\n  description: article?.description,\n  ogDescription: article?.description,\n  ogImage: `https://site.com/${article?.img}`,\n});\n</script>\n\n<template>\n  <v-container id=\"article\" fluid>\n    <ContentRenderer :value=\"article\">\n      <template #empty>\n        <p>No content found.</p>\n      </template>\n\n      <div class=\"article__header\">\n        <div class=\"article__titles\">\n          <div v-if=\"article?.tags.length\" class=\"article__categories_container\">\n            <NuxtLink\n              v-for=\"(tag, index) of article.tags\"\n              :key=\"tag\"\n              class=\"article__category\"\n              :to=\"'/notes/categories/' + tag\"\n            >\n              #{{ tag.toUpperCase() }}{{ index < article.tags.length - 1 ? ',' : '' }}&nbsp;\n            </NuxtLink>\n          </div>\n          <h1 class=\"article__title\">{{ article?.title }}</h1>\n\n          <ContentRendererMarkdown class=\"article__description\" :value=\"article?.excerpt\" />\n        </div>\n      </div>\n\n      <v-row class=\"article__container\">\n        <v-col cols=\"12\" sm=\"12\">\n          <v-row>\n            <v-col\n              v-if=\"article?.body?.toc?.links.length\"\n              cols=\"12\"\n              sm=\"3\"\n              class=\"order-first order-md-last\"\n            >\n              <note-article-toc class=\"toc pl-4 pb-4\" :links=\"article?.body?.toc?.links\" />\n            </v-col>\n\n            <v-col cols=\"12\" sm=\"9\" class=\"order-last order-md-first\">\n              <ContentRendererMarkdown class=\"article__content\" :value=\"article || {}\" />\n\n              <div\n                v-if=\"article?.tags.length\"\n                class=\"article__categories_container d-flex flex-wrap\"\n              >\n                <span class=\"article__categories_label\">Tags:</span>\n                <NuxtLink\n                  v-for=\"tag of article.tags\"\n                  :key=\"tag\"\n                  class=\"article__category\"\n                  :to=\"'/notes/categories/' + tag\"\n                >\n                  {{ tag }}\n                </NuxtLink>\n              </div>\n\n              <div class=\"line-left line-top\">\n                <div class=\"line-block\">\n                  <span></span>\n                </div>\n              </div>\n            </v-col>\n          </v-row>\n        </v-col>\n      </v-row>\n\n      <div class=\"articles__navigation\">\n        <v-container>\n          <note-prev-next :prev=\"prev\" :next=\"next\" />\n        </v-container>\n      </div>\n    </ContentRenderer>\n  </v-container>\n</template>\n"],"names":["useSeoMeta","input","options","title","titleTemplate","meta","useHead","t","meta2","unpackMeta","flattenLinks","links","link","_link","flattened","route","useRoute","lang","slug","data","__temp","__restore","_withAsyncContext","useAsyncData","article","queryContent","surround","_a","prev","next","_b"],"mappings":"4YAiFA,SAASA,GAAWC,EAAOC,EAAS,CAClC,KAAM,CAAE,MAAAC,EAAO,cAAAC,EAAe,GAAGC,CAAI,EAAKJ,EAC1C,OAAOK,GAAQ,CACb,MAAAH,EACA,cAAAC,EAEA,UAAWC,CACf,EAAK,CACD,GAAGH,EACH,UAAUK,EAAG,CACX,MAAMC,EAAQC,EAAW,CAAE,GAAGF,EAAE,SAAW,CAAA,EAC3C,cAAOA,EAAE,UACF,CAEL,GAAGA,EACH,KAAMC,CACd,CACK,CACL,CAAG,CACH,iHC5FA,MAAME,EAAgBC,IACJA,GAAS,CAAE,GAAE,QAASC,GAAS,CAC7C,IAAIC,EAAQ,CAACD,CAAI,EACjB,GAAIA,EAAK,SAAU,CACjB,MAAME,EAAYJ,EAAaE,EAAK,QAAQ,EAC5CC,EAAQ,CAACD,EAAM,GAAGE,CAAS,CAC5B,CACD,OAAOD,CACX,CAAG,kvDCfH,MAAME,EAAQC,IACR,CAAE,KAAAC,EAAM,KAAAC,GAASH,EAAM,OACvB,CAAE,KAAAI,CAAA,GAAe,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAAC,EAAa,WAAWL,CAAI,GAAI,SAAY,CACjE,MAAMM,EAAUC,EAAaR,EAAgB,UAAU,EACpD,MAAM,CAAE,MAAO,IAAIA,CAAI,aAAaC,CAAI,EAAI,CAAA,EAC5C,UAEGQ,EAAWD,IACd,KAAK,CAAC,QAAS,QAAS,aAAa,CAAC,EACtC,KAAK,CAAE,KAAM,EAAG,EAChB,aAAa,IAAIR,CAAI,aAAaC,CAAI,EAAE,EACpC,MAAA,CACL,QAAS,MAAMM,EACf,SAAU,MAAME,CAAA,CAClB,CACD,CAAA,mBACKF,GAAUG,EAAAR,GAAA,YAAAA,EAAM,QAAN,YAAAQ,EAAa,QACvB,CAACC,EAAMC,CAAI,IAAIC,EAAAX,GAAA,YAAAA,EAAM,QAAN,YAAAW,EAAa,WAAY,GAEnC,OAAA9B,GAAA,CACT,MAAOwB,GAAA,YAAAA,EAAS,MAChB,QAASA,GAAA,YAAAA,EAAS,MAClB,YAAaA,GAAA,YAAAA,EAAS,YACtB,cAAeA,GAAA,YAAAA,EAAS,YACxB,QAAS,oBAAoBA,GAAA,YAAAA,EAAS,GAAG,EAAA,CAC1C","x_google_ignoreList":[0]}