import{_ as E}from"./Title.vue.0be6833e.js";import{_ as J}from"./ArticleItem.vue.990bb4c9.js";import{d as z,J as G,g,h as H,o as n,f as m,w as t,b as o,i as e,c as _,r as y,e as c,F as k,j as p,k as q,q as w,t as B,p as I}from"./entry.faaaeb3a.js";import K from"./ContentList.11e02a8e.js";import{_ as M}from"./index.b360caeb.js";import{u as P}from"./asyncData.b296d35a.js";import{V as $,a as v,b as Q}from"./VRow.fbb54114.js";import{V as A}from"./VBtn.ac528651.js";import"./ContentQuery.a8948c51.js";import"./intersectionObserver.ad514c1a.js";const U={class:"article-list"},W={class:"articles__pager"},X=e("span",{class:"ml-5"},null,-1),Y={class:"articles__sidebar"},Z={class:"articles__section"},tt=e("h2",{class:"articles__heading"},"Recent Posts",-1),et=e("p",null,"No articles found.",-1),st={class:"articles__items"},ot={class:"articles__section"},at=e("h2",{class:"articles__heading"},"Categories",-1),nt=e("p",null,"No categories found.",-1),it={class:"articles__items"},L=5,kt=z({__name:"index",async setup(lt){let s,i;const x=G().query.category;let r=0;const u={published:!0};x&&Object.assign(u,{tags:x});const R=([s,i]=g(()=>w("en/articles").only([]).where(u).find()),s=await s,i(),s).length,{data:T,refresh:j}=([s,i]=g(()=>P("posts",()=>w("en/articles").where(u).sort({date:-1}).skip(r).limit(L).find())),s=await s,i(),s),C={path:"/en/articles",where:[u],limit:15,sort:[{date:-1}]},{data:f}=([s,i]=g(()=>P("/",()=>w("/").findOne())),s=await s,i(),s),D=H(()=>{var l;return((l=f==null?void 0:f.value)==null?void 0:l.notes.categories)||[]});function b(l){r+=l,j(),window.scrollTo({top:0,behavior:"smooth"})}return(l,d)=>{const F=E,O=J,V=I,N=K,S=M;return n(),m(S,{id:"articles"},{default:t(()=>[o(F,{text:"Notes",subtitle:" Articles and Advice"}),o(Q,null,{default:t(()=>[o($,null,{default:t(()=>[o(v,{cols:"12",md:"12",lg:"8"},{default:t(()=>[e("div",U,[(n(!0),_(k,null,y(c(T),a=>(n(),m($,{key:a.id,class:"articles__list mt-4 mb-8"},{default:t(()=>[o(v,null,{default:t(()=>[o(O,{article:a},null,8,["article"])]),_:2},1024)]),_:2},1024))),128))]),e("div",W,[c(r)>0?(n(),m(A,{key:0,class:"articles__button",variant:"flat",onClick:d[0]||(d[0]=a=>b(-5))},{default:t(()=>[p("prev")]),_:1})):q("",!0),X,c(r)+L<c(R)?(n(),m(A,{key:1,class:"articles__button",variant:"flat",onClick:d[1]||(d[1]=a=>b(5))},{default:t(()=>[p("next")]),_:1})):q("",!0)])]),_:1}),o(v,{md:"12",lg:"4"},{default:t(()=>[e("div",Y,[e("aside",null,[e("section",Z,[tt,o(N,{query:C},{"not-found":t(()=>[et]),default:t(({list:a})=>[e("ul",st,[(n(!0),_(k,null,y(a,h=>(n(),_("li",{key:h._path},[o(V,{class:"articles__item",to:"/notes"+h._path},{default:t(()=>[p(B(h.title),1)]),_:2},1032,["to"])]))),128))])]),_:1})]),e("section",ot,[at,o(N,{query:C},{"not-found":t(()=>[nt]),default:t(()=>[e("ul",it,[(n(!0),_(k,null,y(c(D),a=>(n(),_("li",{key:a.path,class:"articles__item__wrapper"},[o(V,{class:"articles__item",to:"/notes/categories/"+a.path},{default:t(()=>[p(B(a.title),1)]),_:2},1032,["to"])]))),128))])]),_:1})])])])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{kt as default};
