{"version":3,"file":"_slug_.CJLQ_U11.js","sources":["../../../../pages/notes/categories/[slug].vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport type { QueryBuilderParams } from '@nuxt/content/types';\n\nconst route = useRoute();\nconst categoryParam = route.params.slug;\n\nlet page = 0;\nconst limit = 5;\nconst query = { published: true };\nif (categoryParam) Object.assign(query, { tags: { $contains: categoryParam } });\nconst total = (await queryContent('en/articles').only([]).where(query).find()).length;\nconst { data: articles, refresh } = await useAsyncData('posts', () =>\n  queryContent('en/articles').where(query).sort({ date: -1 }).skip(page).limit(limit).find(),\n);\n\nconst recentPosts: QueryBuilderParams = {\n  path: '/en/articles',\n  where: [query],\n  limit: 15,\n  sort: [{ date: -1 }],\n};\n\nconst { data } = await useAsyncData('settings', () => queryContent('/').findOne());\nconst categories = computed(() => data?.value?.notes.categories || []);\n\n// methods\nfunction refetch(pageNumber: number) {\n  page += pageNumber;\n  refresh();\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n}\n</script>\n\n<template>\n  <PageSection id=\"articles\">\n    <PageTitle :text=\"categoryParam + ' Notes'\" subtitle=\" Articles and Advice\" />\n\n    <v-container>\n      <v-row>\n        <v-col cols=\"12\" md=\"12\" lg=\"8\">\n          <v-row v-for=\"article in articles\" :key=\"article.id\" class=\"articles__list\">\n            <v-col>\n              <note-list-article-item :article=\"article\" />\n            </v-col>\n          </v-row>\n\n          <div class=\"articles__pager\">\n            <v-btn v-if=\"page > 0\" class=\"articles__button\" variant=\"flat\" @click=\"refetch(-5)\"\n              >prev</v-btn\n            >\n            <span class=\"ml-5\"></span>\n            <v-btn\n              v-if=\"page + limit < total\"\n              class=\"articles__button\"\n              variant=\"flat\"\n              @click=\"refetch(5)\"\n              >next</v-btn\n            >\n          </div>\n        </v-col>\n\n        <v-col md=\"12\" lg=\"4\">\n          <div class=\"articles__sidebar\">\n            <aside>\n              <section class=\"articles__section\">\n                <h2 class=\"articles__heading\">Recent Posts</h2>\n                <ContentList :query=\"recentPosts\">\n                  <template #not-found>\n                    <p>No articles found.</p>\n                  </template>\n\n                  <template #default=\"{ list }\">\n                    <ul class=\"articles__items\">\n                      <li\n                        v-for=\"article of list\"\n                        :key=\"article._path\"\n                        class=\"articles__item__wrapper\"\n                      >\n                        <NuxtLink class=\"articles__item\" :to=\"'/notes' + article._path\">\n                          {{ article.title }}\n                        </NuxtLink>\n                      </li>\n                    </ul>\n                  </template>\n                </ContentList>\n              </section>\n\n              <section class=\"articles__section\">\n                <h2 class=\"articles__heading\">Categories</h2>\n                <ContentList :query=\"recentPosts\">\n                  <template #not-found>\n                    <p>No categories found.</p>\n                  </template>\n\n                  <template #default>\n                    <ul class=\"articles__items\">\n                      <li\n                        v-for=\"category of categories\"\n                        :key=\"category.path\"\n                        class=\"articles__item__wrapper\"\n                      >\n                        <NuxtLink class=\"articles__item\" :to=\"'/notes/categories/' + category.path\">\n                          {{ category.title }}\n                        </NuxtLink>\n                      </li>\n                    </ul>\n                  </template>\n                </ContentList>\n              </section>\n            </aside>\n          </div>\n        </v-col>\n      </v-row>\n    </v-container>\n  </PageSection>\n</template>\n"],"names":["limit","categoryParam","useRoute","page","query","total","__temp","__restore","_withAsyncContext","queryContent","articles","refresh","useAsyncData","recentPosts","data","categories","computed","_a","refetch","pageNumber"],"mappings":"86BAOMA,EAAQ,gDAHR,MAAAC,EADQC,IACc,OAAO,KAEnC,IAAIC,EAAO,EAEL,MAAAC,EAAQ,CAAE,UAAW,IACvBH,GAAsB,OAAA,OAAOG,EAAO,CAAE,KAAM,CAAE,UAAWH,GAAiB,EACxE,MAAAI,GAAe,CAAAC,EAAAC,CAAA,EAAAC,EAAA,IAAAC,EAAa,aAAa,EAAE,KAAK,CAAA,CAAE,EAAE,MAAML,CAAK,EAAE,KAAK,CAAA,mBAAG,OACzE,CAAE,KAAMM,EAAU,QAAAC,CAAQ,GAAU,CAAAL,EAAAC,CAAA,EAAAC,EAAA,IAAAI,EAAa,QAAS,IAC9DH,EAAa,aAAa,EAAE,MAAML,CAAK,EAAE,KAAK,CAAE,KAAM,EAAI,CAAA,EAAE,KAAKD,CAAI,EAAE,MAAMH,CAAK,EAAE,KAAK,CAAA,CAC3F,mBAEMa,EAAkC,CACtC,KAAM,eACN,MAAO,CAACT,CAAK,EACb,MAAO,GACP,KAAM,CAAC,CAAE,KAAM,GAAI,CAAA,EAGf,CAAE,KAAAU,CAAe,GAAA,CAAAR,EAAAC,CAAA,EAAAC,EAAA,IAAAI,EAAa,WAAY,IAAMH,EAAa,GAAG,EAAE,QAAS,CAAA,CAAA,mBAC3EM,EAAaC,EAAS,WAAM,QAAAC,EAAAH,GAAA,YAAAA,EAAM,QAAN,YAAAG,EAAa,MAAM,aAAc,CAAA,EAAE,EAGrE,SAASC,EAAQC,EAAoB,CAC3BhB,GAAAgB,EACAR,IACR,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,SAAU,CAChD"}