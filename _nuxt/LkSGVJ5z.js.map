{"version":3,"file":"LkSGVJ5z.js","sources":["../../../../node_modules/.pnpm/@unhead+vue@1.11.7_vue@3.5.11/node_modules/@unhead/vue/dist/index.mjs","../../../../components/Note/ArticleToc.vue","../../../../pages/notes/[lang]/articles/[slug].vue"],"sourcesContent":["import { useScript as useScript$1 } from 'unhead';\nexport { CapoPlugin, HashHydrationPlugin, createHeadCore } from 'unhead';\nimport { i as injectHead, h as headSymbol, V as Vue3 } from './shared/vue.f49591ad.mjs';\nexport { c as createHead, a as createServerHead, r as resolveUnrefHeadInput, s as setHeadInjectionHandler } from './shared/vue.f49591ad.mjs';\nimport { composableNames, whitelistSafeInput, unpackMeta } from '@unhead/shared';\nimport { u as useHead } from './shared/vue.8fc199ce.mjs';\nimport { getCurrentInstance, onMounted, isRef, watch, onScopeDispose, ref } from 'vue';\n\nconst coreComposableNames = [\n  \"injectHead\"\n];\nconst unheadVueComposablesImports = {\n  \"@unhead/vue\": [...coreComposableNames, ...composableNames]\n};\n\nfunction useHeadSafe(input, options = {}) {\n  return useHead(input, { ...options, transform: whitelistSafeInput });\n}\n\nfunction registerVueScopeHandlers(script, scope) {\n  if (!scope) {\n    return;\n  }\n  const _registerCb = (key, cb) => {\n    if (!script._cbs[key]) {\n      cb(script.instance);\n      return () => {\n      };\n    }\n    let i = script._cbs[key].push(cb);\n    const destroy = () => {\n      if (i) {\n        script._cbs[key]?.splice(i - 1, 1);\n        i = null;\n      }\n    };\n    onScopeDispose(destroy);\n    return destroy;\n  };\n  script.onLoaded = (cb) => _registerCb(\"loaded\", cb);\n  script.onError = (cb) => _registerCb(\"error\", cb);\n}\nfunction useScript(_input, _options) {\n  const input = typeof _input === \"string\" ? { src: _input } : _input;\n  const options = _options || {};\n  const head = options?.head || injectHead();\n  options.head = head;\n  const scope = getCurrentInstance();\n  options.eventContext = scope;\n  if (scope && typeof options.trigger === \"undefined\") {\n    options.trigger = onMounted;\n  } else if (isRef(options.trigger)) {\n    const refTrigger = options.trigger;\n    let off;\n    options.trigger = new Promise((resolve) => {\n      off = watch(refTrigger, (val) => {\n        if (val) {\n          resolve(true);\n        }\n      }, {\n        immediate: true\n      });\n      onScopeDispose(() => resolve(false), true);\n    }).then((val) => {\n      off?.();\n      return val;\n    });\n  }\n  head._scriptStatusWatcher = head._scriptStatusWatcher || head.hooks.hook(\"script:updated\", ({ script: s }) => {\n    s._statusRef.value = s.status;\n  });\n  const script = useScript$1(input, options);\n  script._statusRef = script._statusRef || ref(script.status);\n  registerVueScopeHandlers(script, scope);\n  return new Proxy(script, {\n    get(_, key, a) {\n      return Reflect.get(_, key === \"status\" ? \"_statusRef\" : key, a);\n    }\n  });\n}\n\nfunction useSeoMeta(input, options) {\n  const { title, titleTemplate, ...meta } = input;\n  return useHead({\n    title,\n    titleTemplate,\n    // @ts-expect-error runtime type\n    _flatMeta: meta\n  }, {\n    ...options,\n    transform(t) {\n      const meta2 = unpackMeta({ ...t._flatMeta });\n      delete t._flatMeta;\n      return {\n        // @ts-expect-error runtime type\n        ...t,\n        meta: meta2\n      };\n    }\n  });\n}\n\nfunction useServerHead(input, options = {}) {\n  const head = options.head || injectHead();\n  delete options.head;\n  if (head)\n    return head.push(input, { ...options, mode: \"server\" });\n}\n\nfunction useServerHeadSafe(input, options = {}) {\n  return useHeadSafe(input, { ...options, mode: \"server\" });\n}\n\nfunction useServerSeoMeta(input, options) {\n  return useSeoMeta(input, { ...options, mode: \"server\" });\n}\n\nconst Vue2ProvideUnheadPlugin = (_Vue, head) => {\n  _Vue.mixin({\n    beforeCreate() {\n      const options = this.$options;\n      const origProvide = options.provide;\n      options.provide = function() {\n        let origProvideResult;\n        if (typeof origProvide === \"function\")\n          origProvideResult = origProvide.call(this);\n        else\n          origProvideResult = origProvide || {};\n        return {\n          ...origProvideResult,\n          [headSymbol]: head\n        };\n      };\n    }\n  });\n};\n\nconst VueHeadMixin = {\n  created() {\n    let source = false;\n    if (Vue3) {\n      const instance = getCurrentInstance();\n      if (!instance)\n        return;\n      const options = instance.type;\n      if (!options || !(\"head\" in options))\n        return;\n      source = typeof options.head === \"function\" ? () => options.head.call(instance.proxy) : options.head;\n    } else {\n      const head = this.$options.head;\n      if (head) {\n        source = typeof head === \"function\" ? () => head.call(this) : head;\n      }\n    }\n    source && useHead(source);\n  }\n};\n\nexport { Vue2ProvideUnheadPlugin, VueHeadMixin, injectHead, unheadVueComposablesImports, useHead, useHeadSafe, useScript, useSeoMeta, useServerHead, useServerHeadSafe, useServerSeoMeta };\n","<script setup>\ndefineProps({\n  links: {\n    type: Array,\n    required: true,\n  },\n});\n\nconst flattenLinks = (links) => {\n  const _links = (links || []).flatMap((link) => {\n    let _link = [link];\n    if (link.children) {\n      const flattened = flattenLinks(link.children);\n      _link = [link, ...flattened];\n    }\n    return _link;\n  });\n  return _links;\n};\n</script>\n\n<template>\n  <div class=\"py-5\">\n    <h2\n      class=\"mb-6 text-lg uppercase relative before:bg-emerald-600 before:bottom-[-10px] before:h-1 before:absolute before:w-[80px]\"\n    >\n      Table of contents\n    </h2>\n\n    <ul class=\"ml-4 list-disc\">\n      <li\n        v-for=\"link of flattenLinks(links)\"\n        :key=\"link.id\"\n        :class=\"{\n          'mb-1': link.depth === 2,\n          'mt-2': link.depth === 2,\n          'ml-4': link.depth === 3,\n          'list-[circle]': link.depth === 3,\n          'ml-8': link.depth === 4,\n          'list-[square]': link.depth === 4,\n        }\"\n      >\n        <NuxtLink\n          class=\"hover:text-emerald-600 border-0 text-gray-500 font-normal\"\n          :to=\"'#' + link.id\"\n        >\n          <span>{{ link.text }}</span>\n        </NuxtLink>\n      </li>\n    </ul>\n  </div>\n</template>\n","<script lang=\"ts\" setup>\nconst route = useRoute();\nconst { lang, slug } = route.params;\nconst { data } = await useAsyncData(`article-${slug}`, async () => {\n  const article = queryContent(lang as string, 'articles')\n    .where({ _path: `/${lang}/articles/${slug}` })\n    .findOne();\n\n  const surround = queryContent()\n    .only(['_path', 'title', 'description'])\n    .sort({ title: 1 })\n    .findSurround(`/${lang}/articles/${slug}`);\n  return {\n    article: await article,\n    surround: await surround,\n  };\n});\nconst article = data?.value?.article;\nconst [prev, next] = data?.value?.surround || [];\n\nuseSeoMeta({\n  title: article?.title,\n  ogTitle: article?.title,\n  description: article?.description,\n  ogDescription: article?.description,\n});\n</script>\n\n<template>\n  <Page>\n    <div class=\"flex flex-col lg:flex-row gap-10\">\n      <div class=\"lg:w-2/3\">\n        <div class=\"text-center mx-auto px-4\">\n          <h1\n            class=\"font-mono text-gray-800 text-3xl lg:text-4xl xl:text-4xl my-8 mb-12\"\n          >\n            {{ article?.title }}\n          </h1>\n        </div>\n\n        <div\n          v-if=\"article?.body?.toc?.links.length\"\n          class=\"lg:hidden mb-12 px-4\"\n        >\n          <note-article-toc :links=\"article?.body?.toc?.links\" />\n        </div>\n\n        <div\n          class=\"px-6 py-10 relative after:bg-white after:absolute after:bottom-0 after:left-0 after:w-full after:top-0 after:border-2 after:border-gray-100 after:z-[-99] after:opacity-35 rounded-md shadow-[5px_5px_rgb(0_0_0/20%)]\"\n        >\n          <ContentRendererMarkdown\n            class=\"article__content font-mono text-gray-600\"\n            :value=\"article.body || {}\"\n          />\n\n          <div\n            v-if=\"article?.tags.length\"\n            class=\"mt-12 flex flex-wrap align-center gap-1\"\n          >\n            <NuxtLink\n              v-for=\"tag of article.tags\"\n              :key=\"tag\"\n              class=\"border-2 border-emerald-600 text-emerald-600 px-2 py-1\"\n              :to=\"'/notes/categories/' + tag\"\n            >\n              {{ tag }}\n            </NuxtLink>\n          </div>\n\n          <div class=\"line-left line-top\">\n            <div class=\"line-block absolute left-[-40px]\">\n              <span></span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <aside class=\"relative hidden lg:block min-w-[200px]\">\n        <div v-if=\"article?.body?.toc?.links.length\" class=\"fixed\">\n          <note-article-toc\n            class=\"toc pl-4 pb-4\"\n            :links=\"article?.body?.toc?.links\"\n          />\n        </div>\n      </aside>\n    </div>\n\n    <div class=\"border-t-2 border-gray-300 mt-8\">\n      <note-prev-next :prev=\"prev\" :next=\"next\" />\n    </div>\n  </Page>\n</template>\n\n<style lang=\"scss\">\n.article__content {\n  @apply font-mono text-gray-800;\n\n  h2 {\n    @apply text-2xl mt-12 mb-6;\n\n    a {\n      @apply font-bold;\n    }\n  }\n\n  h3 {\n    @apply text-xl mt-12 mb-6;\n\n    a {\n      @apply font-semibold;\n    }\n  }\n\n  p {\n    @apply mt-4 mb-4;\n  }\n\n  b,\n  strong {\n    @apply font-bold;\n  }\n\n  em,\n  code,\n  italic {\n    @apply italic text-gray-600 bg-gray-200 p-1;\n  }\n\n  ol {\n    list-style: decimal;\n    margin-top: 30px;\n    margin-bottom: 30px;\n    padding-left: 20px;\n  }\n\n  ol li {\n    counter-increment: list-number;\n    line-height: 1.7;\n    margin-bottom: 0;\n    margin-top: 0;\n    min-height: 28px;\n  }\n\n  ul {\n    list-style: disc;\n    list-style-position: inside;\n    margin-top: 30px;\n    margin-bottom: 30px;\n    padding-left: 20px;\n  }\n\n  ul li {\n    line-height: 1.7;\n  }\n\n  ul ul,\n  ol ol,\n  ul ol,\n  ol ul {\n    margin-bottom: 15px;\n    margin-left: 15px;\n    margin-top: 15px;\n  }\n\n  pre {\n    @apply mt-4 mb-6 rounded-md;\n    display: flex;\n    max-width: 100%;\n    overflow: auto;\n    white-space: pre;\n  }\n\n  pre code {\n    @apply px-8 py-6 w-full bg-gray-900 font-mono;\n    overflow: auto;\n  }\n}\n</style>\n"],"names":["useSeoMeta","input","options","title","titleTemplate","meta","useHead","meta2","unpackMeta","flattenLinks","links","link","_link","flattened","route","useRoute","lang","slug","data","__temp","__restore","_withAsyncContext","useAsyncData","article","queryContent","surround","_a","prev","next","_b"],"mappings":"6WAiFA,SAASA,GAAWC,EAAOC,EAAS,CAClC,KAAM,CAAE,MAAAC,EAAO,cAAAC,EAAe,GAAGC,CAAI,EAAKJ,EAC1C,OAAOK,GAAQ,CACb,MAAAH,EACA,cAAAC,EAEA,UAAWC,CACf,EAAK,CACD,GAAGH,EACH,UAAU,EAAG,CACX,MAAMK,EAAQC,EAAW,CAAE,GAAG,EAAE,SAAW,CAAA,EAC3C,cAAO,EAAE,UACF,CAEL,GAAG,EACH,KAAMD,CACd,CACK,CACL,CAAG,CACH,6HC5FA,MAAME,EAAgBC,IACJA,GAAS,CAAE,GAAE,QAASC,GAAS,CAC7C,IAAIC,EAAQ,CAACD,CAAI,EACjB,GAAIA,EAAK,SAAU,CACjB,MAAME,EAAYJ,EAAaE,EAAK,QAAQ,EAC5CC,EAAQ,CAACD,EAAM,GAAGE,CAAS,CAC5B,CACD,OAAOD,CACX,CAAG,kzECfH,MAAME,EAAQC,IACR,CAAE,KAAAC,EAAM,KAAAC,GAASH,EAAM,OACvB,CAAE,KAAAI,CAAA,GAAe,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAAC,GAAa,WAAWL,CAAI,GAAI,SAAY,CACjE,MAAMM,EAAUC,EAAaR,EAAgB,UAAU,EACpD,MAAM,CAAE,MAAO,IAAIA,CAAI,aAAaC,CAAI,EAAI,CAAA,EAC5C,UAEGQ,EAAWD,IACd,KAAK,CAAC,QAAS,QAAS,aAAa,CAAC,EACtC,KAAK,CAAE,MAAO,EAAG,EACjB,aAAa,IAAIR,CAAI,aAAaC,CAAI,EAAE,EACpC,MAAA,CACL,QAAS,MAAMM,EACf,SAAU,MAAME,CAAA,CAClB,CACD,CAAA,mBACKF,GAAUG,EAAAR,GAAA,YAAAA,EAAM,QAAN,YAAAQ,EAAa,QACvB,CAACC,EAAMC,CAAI,IAAIC,EAAAX,GAAA,YAAAA,EAAM,QAAN,YAAAW,EAAa,WAAY,GAEnC,OAAA7B,GAAA,CACT,MAAOuB,GAAA,YAAAA,EAAS,MAChB,QAASA,GAAA,YAAAA,EAAS,MAClB,YAAaA,GAAA,YAAAA,EAAS,YACtB,cAAeA,GAAA,YAAAA,EAAS,WAAA,CACzB","x_google_ignoreList":[0]}