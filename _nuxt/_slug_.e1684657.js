import{s as J,v as K,x as Q,y as W,z as X,o as _,c as v,i as c,F as q,r as z,l as Z,b as l,w as a,j as b,t as y,p as B,f as x,k as $,A as ee,B as te,C as se,D as ne,E as I,G as ae,h as oe,H as le,V as re,I as ce,d as ie,J as ue,g as _e,e as r,K as de,q as j}from"./entry.faaaeb3a.js";import me from"./ContentRendererMarkdown.951a6373.js";import{a as M,V as A,b as U}from"./VRow.fbb54114.js";import{V as G,u as pe,a as fe}from"./intersectionObserver.ad514c1a.js";import he from"./ContentRenderer.1b034a2e.js";import{u as ve}from"./asyncData.b296d35a.js";function ge(e,s){const p=J({});return K(()=>{const m=W(e),{title:n,titleTemplate:o,...i}=m;p.value={title:n,titleTemplate:o,meta:X(i)}}),Q(p,s)}function ye(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(s?ke(e):xe(e))return e;e=e.parentElement}return document.scrollingElement}function xe(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const s=window.getComputedStyle(e);return s.overflowY==="scroll"||s.overflowY==="auto"&&e.scrollHeight>e.clientHeight}function ke(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const s=window.getComputedStyle(e);return["scroll","auto"].includes(s.overflowY)}const we={class:"toc"},$e=c("header",{class:"toc__header"},[c("h2",{class:"toc__title"},"Table of contents")],-1),be={class:"toc__links-container"},Ee={__name:"ArticleToc",props:{links:{type:Array,required:!0}},setup(e){const s=p=>(p||[]).map(n=>{let o=[n];if(n.children){const i=s(n.children);o=[n,...i]}return o}).flat(1);return(p,m)=>{const n=B;return _(),v("nav",we,[$e,c("ul",be,[(_(!0),v(q,null,z(s(e.links),o=>(_(),v("li",{key:o.id,class:Z(`toc__link-wrapper toc__link-wrapper--${o.depth}`)},[l(n,{class:"toc__link",to:"#"+o.id},{default:a(()=>[b(y(o.text),1)]),_:2},1032,["to"])],2))),128))])])}}},Ve={class:"item__label"},Ce={class:"item__title"},Ne={class:"item__label"},Le={class:"item__title"},Te={__name:"PrevNext",props:{prev:{type:Object,required:!1,default:()=>{}},next:{type:Object,required:!1,default:()=>{}}},setup(e){return(s,p)=>{const m=B;return _(),x(A,null,{default:a(()=>{var n,o;return[(n=e.prev)!=null&&n.title?(_(),x(M,{key:0,cols:"12",xs:"12",class:"item item--prev"},{default:a(()=>{var i;return[l(m,{to:"/notes"+((i=e.prev)==null?void 0:i._path)},{default:a(()=>{var t;return[c("div",Ve,[l(G,null,{default:a(()=>[b("mdi-arrow-left")]),_:1}),b(" Previous article")]),c("div",Ce,y((t=e.prev)==null?void 0:t.title),1)]}),_:1},8,["to"])]}),_:1})):$("",!0),(o=e.next)!=null&&o.title?(_(),x(M,{key:1,cols:"12",xs:"12",class:"item item--next"},{default:a(()=>[l(m,{to:"/notes"+e.next._path},{default:a(()=>[c("div",Ne,[b("Next article "),l(G,{icon:"mdi-arrow-right"})]),c("div",Le,y(e.next.title),1)]),_:1},8,["to"])]),_:1})):$("",!0)]}),_:1})}}};function He(e){return Math.floor(Math.abs(e))*Math.sign(e)}const Me=ee({scale:{type:[Number,String],default:.5},...te()},"VParallax"),Pe=se()({name:"VParallax",props:Me(),setup(e,s){let{slots:p}=s;const{intersectionRef:m,isIntersecting:n}=pe(),{resizeRef:o,contentRect:i}=fe(),{height:t}=ne(),E=J();K(()=>{var d;m.value=o.value=(d=E.value)==null?void 0:d.$el});let u;I(n,d=>{d?(u=ye(m.value),u=u===document.scrollingElement?document:u,u.addEventListener("scroll",f,{passive:!0}),f()):u.removeEventListener("scroll",f)}),ae(()=>{u==null||u.removeEventListener("scroll",f)}),I(t,f),I(()=>{var d;return(d=i.value)==null?void 0:d.height},f);const V=oe(()=>1-ce(+e.scale));let C=-1;function f(){n.value&&(cancelAnimationFrame(C),C=requestAnimationFrame(()=>{var T;const d=((T=E.value)==null?void 0:T.$el).querySelector(".v-img__img");if(!d)return;const N=u instanceof Document?document.documentElement.clientHeight:u.clientHeight,L=u instanceof Document?window.scrollY:u.scrollTop,R=m.value.getBoundingClientRect().top+L,k=i.value.height,D=R+(k-N)/2,P=He((L-D)*V.value),S=Math.max(1,(V.value*(N-k)+k)/k);d.style.setProperty("transform",`translateY(${P}px) scale(${S})`)}))}return le(()=>l(re,{class:["v-parallax",{"v-parallax--active":n.value},e.class],style:e.style,ref:E,cover:!0,onLoadstart:f,onLoad:f},p)),{}}}),Se=c("p",null,"No content found.",-1),Re={class:"article__header"},De={class:"article__titles"},Ie={key:0,class:"article__categories_container"},qe={class:"article__title"},ze={class:"article__image_container"},Ae=["innerHTML"],Be={key:0,class:"article__categories_container d-flex flex-wrap"},Oe=c("span",{class:"article__categories_label"},"Tags:",-1),Fe=c("div",{class:"line-left line-top"},[c("div",{class:"line-block"},[c("span")])],-1),Ye={class:"articles__navigation"},We=ie({__name:"[slug]",async setup(e){var V,C;let s,p;const m=ue(),{lang:n,slug:o}=m.params,{data:i}=([s,p]=_e(async()=>ve(`article-${o}`,async()=>{const f=j(n,"articles").where({_path:`/${n}/articles/${o}`}).findOne(),d=j().only(["_path","title","description"]).sort({date:1}).findSurround(`/${n}/articles/${o}`);return{article:await f,surround:await d}})),s=await s,p(),s),t=(V=i==null?void 0:i.value)==null?void 0:V.article,[E,u]=((C=i==null?void 0:i.value)==null?void 0:C.surround)||[];return ge({title:t==null?void 0:t.title,ogTitle:t==null?void 0:t.title,description:t==null?void 0:t.description,ogDescription:t==null?void 0:t.description,ogImage:`https://site.com/${t==null?void 0:t.img}`}),(f,d)=>{const N=B,L=me,R=Ee,k=Te,D=he;return _(),x(U,{id:"article",fluid:""},{default:a(()=>[l(D,{value:r(t)},{empty:a(()=>[Se]),default:a(()=>{var P,S,T,O;return[c("div",Re,[c("div",De,[(P=r(t))!=null&&P.tags.length?(_(),v("div",Ie,[(_(!0),v(q,null,z(r(t).tags,(h,g)=>(_(),x(N,{key:h,class:"article__category",to:"/notes/categories/"+h},{default:a(()=>[b(" #"+y(h.toUpperCase())+y(g<r(t).tags.length-1?",":"")+"Â  ",1)]),_:2},1032,["to"]))),128))])):$("",!0),c("h1",qe,y((S=r(t))==null?void 0:S.title),1),l(L,{class:"article__description",value:(T=r(t))==null?void 0:T.excerpt},null,8,["value"])])]),c("div",ze,[l(de,{class:"article__image_wrapper"},{default:a(()=>{var h,g;return[l(Pe,{class:"article__image",height:"740","lazy-src":((h=r(t))==null?void 0:h.img)||"https://source.unsplash.com/random",src:((g=r(t))==null?void 0:g.img)||"https://source.unsplash.com/random"},null,8,["lazy-src","src"])]}),_:1}),(O=r(t))!=null&&O.credits?(_(),v("div",{key:0,class:"article__image__credits",innerHTML:r(t).credits},null,8,Ae)):$("",!0)]),l(A,{class:"article__container"},{default:a(()=>[l(M,{cols:"12",sm:"12"},{default:a(()=>[l(A,null,{default:a(()=>{var h,g,F;return[(F=(g=(h=r(t))==null?void 0:h.body)==null?void 0:g.toc)!=null&&F.links.length?(_(),x(M,{key:0,cols:"12",sm:"3",class:"order-first order-md-last"},{default:a(()=>{var H,w,Y;return[l(R,{class:"toc pl-4 pb-4",links:(Y=(w=(H=r(t))==null?void 0:H.body)==null?void 0:w.toc)==null?void 0:Y.links},null,8,["links"])]}),_:1})):$("",!0),l(M,{cols:"12",sm:"9",class:"order-last order-md-first"},{default:a(()=>{var H;return[l(L,{class:"article__content",value:r(t)||{}},null,8,["value"]),(H=r(t))!=null&&H.tags.length?(_(),v("div",Be,[Oe,(_(!0),v(q,null,z(r(t).tags,w=>(_(),x(N,{key:w,class:"article__category",to:"/notes/categories/"+w},{default:a(()=>[b(y(w),1)]),_:2},1032,["to"]))),128))])):$("",!0),Fe]}),_:1})]}),_:1})]),_:1})]),_:1}),c("div",Ye,[l(U,null,{default:a(()=>[l(k,{prev:r(E),next:r(u)},null,8,["prev","next"])]),_:1})])]}),_:1},8,["value"])]),_:1})}}});export{We as default};
