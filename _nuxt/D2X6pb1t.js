import{_ as S}from"./EYY6DmMM.js";import{_ as j}from"./DKnNe_zf.js";import{d as E,m as z,w as x,c as G,o as n,a as _,b as a,e as l,f as e,g as u,r as y,u as c,F as w,h as m,i as q,t as V,_ as H}from"./CPHa03rg.js";import I from"./DRNVcoeA.js";import{_ as J}from"./DBWmPomf.js";import{q as v,u as B}from"./BN7xTSAD.js";import{V as P}from"./DqJUF2-6.js";import"./BQj3XSEJ.js";import"./C4uS0PHa.js";import"./B7P5Okg3.js";const K={class:"container flex gap-8"},M={class:"flex flex-col gap-4"},Q={class:"text-center mt-8"},U={class:"w-1/2"},W={class:"border-l-2 border-[rgba(0,0,0,.1)] pl-4"},X={class:"pb-10"},Y={class:"pb-10"},$=5,pt=E({__name:"index",async setup(Z){let s,r;const b=z().query.category;let p=0;const d={published:!0};b&&Object.assign(d,{tags:b});const A=([s,r]=x(()=>v("en/articles").only([]).where(d).find()),s=await s,r(),s).length,{data:L,refresh:T}=([s,r]=x(()=>B("posts",()=>v("en/articles").where(d).sort({date:-1}).skip(p).limit($).find())),s=await s,r(),s),k={path:"/en/articles",where:[d],limit:15,sort:[{date:-1}]},{data:f}=([s,r]=x(()=>B("/",()=>v("/").findOne())),s=await s,r(),s),D=G(()=>{var i;return((i=f==null?void 0:f.value)==null?void 0:i.notes.categories)||[]});function h(i){p+=i,T(),window.scrollTo({top:0,behavior:"smooth"})}return(i,t)=>{const F=S,O=j,C=H,N=I,R=J;return n(),_(R,null,{default:a(()=>[l(F,{text:"Notes",subtitle:" Articles and Advice"}),e("div",K,[e("div",null,[e("div",M,[(n(!0),u(w,null,y(c(L),o=>(n(),_(O,{key:o.id,article:o},null,8,["article"]))),128))]),e("div",Q,[c(p)>0?(n(),_(P,{key:0,variant:"flat",class:"bg-white",onClick:t[0]||(t[0]=o=>h(-5))},{default:a(()=>t[2]||(t[2]=[m("prev")])),_:1})):q("",!0),t[4]||(t[4]=e("span",{class:"ml-5"},null,-1)),c(p)+$<c(A)?(n(),_(P,{key:1,class:"bg-white",variant:"flat",onClick:t[1]||(t[1]=o=>h(5))},{default:a(()=>t[3]||(t[3]=[m("next")])),_:1})):q("",!0)])]),e("div",U,[e("aside",W,[e("section",X,[t[6]||(t[6]=e("h2",{class:"uppercase text-emerald-600"},"Recent Posts",-1)),l(N,{query:k},{"not-found":a(()=>t[5]||(t[5]=[e("p",null,"No articles found.",-1)])),default:a(({list:o})=>[e("ul",null,[(n(!0),u(w,null,y(o,g=>(n(),u("li",{key:g._path},[l(C,{to:"/notes"+g._path},{default:a(()=>[m(V(g.title),1)]),_:2},1032,["to"])]))),128))])]),_:1})]),e("section",Y,[t[8]||(t[8]=e("h2",{class:"uppercase text-emerald-600"},"Categories",-1)),l(N,{query:k},{"not-found":a(()=>t[7]||(t[7]=[e("p",null,"No categories found.",-1)])),default:a(()=>[e("ul",null,[(n(!0),u(w,null,y(c(D),o=>(n(),u("li",{key:o.path},[l(C,{to:"/notes/categories/"+o.path},{default:a(()=>[m(V(o.title),1)]),_:2},1032,["to"])]))),128))])]),_:1})])])])])]),_:1})}}});export{pt as default};
//# sourceMappingURL=D2X6pb1t.js.map
