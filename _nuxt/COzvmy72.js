import{_ as R}from"./BxPcjVjz.js";import{_ as S}from"./D963LwOf.js";import{d as j,m as E,w as f,c as z,o as n,a as C,b as a,e as c,f as t,g as r,r as x,u,F as g,i as N,h as q,t as P,_ as G}from"./B-n1uWO2.js";import H from"./Bv4M0sg6.js";import{_ as I}from"./BOOESpY6.js";import{q as y,u as $}from"./CwaOFWu2.js";import"./BKi3C4qS.js";import"./CuosjVjq.js";const J={class:"container flex flex-col md:flex-row px-4 gap-8"},K={class:"flex flex-col gap-4"},M={class:"text-center mt-8"},Q={class:"min-w-[300px]"},U={class:"border-l-2 border-[rgba(0,0,0,.1)] pl-4"},W={class:"pb-10"},X={class:"pb-10"},Y={class:"mt-4"},A=5,ct=j({__name:"index",async setup(Z){let s,l;const h=E().query.category;let p=0;const d={published:!0};h&&Object.assign(d,{tags:h});const B=([s,l]=f(()=>y("en/articles").only([]).where(d).find()),s=await s,l(),s).length,{data:V,refresh:L}=([s,l]=f(()=>$("posts",()=>y("en/articles").where(d).sort({date:-1}).skip(p).limit(A).find())),s=await s,l(),s),b={path:"/en/articles",where:[d],limit:15,sort:[{date:-1}]},{data:_}=([s,l]=f(()=>$("/",()=>y("/").findOne())),s=await s,l(),s),T=z(()=>{var i;return((i=_==null?void 0:_.value)==null?void 0:i.notes.categories)||[]});function w(i){p+=i,L(),window.scrollTo({top:0,behavior:"smooth"})}return(i,e)=>{const D=R,F=S,k=G,v=H,O=I;return n(),C(O,null,{default:a(()=>[c(D,{text:"Notes",subtitle:" Articles and Advice"}),t("div",J,[t("div",null,[t("div",K,[(n(!0),r(g,null,x(u(V),o=>(n(),C(F,{key:o.id,article:o},null,8,["article"]))),128))]),t("div",M,[u(p)>0?(n(),r("button",{key:0,class:"bg-white py-2 px-4 rounded",onClick:e[0]||(e[0]=o=>w(-5))}," prev ")):N("",!0),e[2]||(e[2]=t("span",{class:"ml-5"},null,-1)),u(p)+A<u(B)?(n(),r("button",{key:1,class:"bg-white py-2 px-4 rounded",variant:"flat",onClick:e[1]||(e[1]=o=>w(5))}," next ")):N("",!0)])]),t("div",Q,[t("aside",U,[t("section",W,[e[4]||(e[4]=t("h2",{class:"uppercase text-emerald-600 mb-4"},"Recent Posts",-1)),c(v,{query:b},{"not-found":a(()=>e[3]||(e[3]=[t("p",null,"No articles found.",-1)])),default:a(({list:o})=>[t("ul",null,[(n(!0),r(g,null,x(o,m=>(n(),r("li",{key:m._path},[c(k,{to:"/notes"+m._path},{default:a(()=>[q(P(m.title),1)]),_:2},1032,["to"])]))),128))])]),_:1})]),t("section",X,[e[6]||(e[6]=t("h2",{class:"uppercase text-emerald-600"},"Categories",-1)),c(v,{query:b},{"not-found":a(()=>e[5]||(e[5]=[t("p",null,"No categories found.",-1)])),default:a(()=>[t("ul",Y,[(n(!0),r(g,null,x(u(T),o=>(n(),r("li",{key:o.path,class:"uppercase"},[c(k,{to:"/notes/categories/"+o.path},{default:a(()=>[q(P(o.title),1)]),_:2},1032,["to"])]))),128))])]),_:1})])])])])]),_:1})}}});export{ct as default};
//# sourceMappingURL=COzvmy72.js.map
