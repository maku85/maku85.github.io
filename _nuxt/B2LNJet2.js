import{_ as E}from"./REH1cjVJ.js";import{_ as z}from"./B6Jx65KF.js";import{d as G,x as H,h as y,i as I,o as l,g as _,w as e,e as s,c as u,r as w,f as m,F as k,j as n,k as c,l as q,q as x,t as B,m as J}from"./ikNkmfyd.js";import K from"./CH6AaZbg.js";import{_ as M}from"./DG9Zksfz.js";import{u as P}from"./BpcXhgfv.js";import{V as $,a as b,b as Q}from"./BjNsgXJM.js";import{V as A}from"./BEzV4jDY.js";import"./CwP6FBqz.js";import"./Cetqe74y.js";const U={class:"text-center mt-8"},W={class:"border-l-2 border-[rgba(0,0,0,.1)] pl-4"},X={class:"pb-10"},Y={class:"pb-10"},L=5,dt=G({__name:"index",async setup(Z){let o,r;const C=H().query.category;let d=0;const p={published:!0};C&&Object.assign(p,{tags:C});const R=([o,r]=y(()=>x("en/articles").only([]).where(p).find()),o=await o,r(),o).length,{data:T,refresh:j}=([o,r]=y(()=>P("posts",()=>x("en/articles").where(p).sort({date:-1}).skip(d).limit(L).find())),o=await o,r(),o),V={path:"/en/articles",where:[p],limit:15,sort:[{date:-1}]},{data:f}=([o,r]=y(()=>P("/",()=>x("/").findOne())),o=await o,r(),o),D=I(()=>{var i;return((i=f==null?void 0:f.value)==null?void 0:i.notes.categories)||[]});function v(i){d+=i,j(),window.scrollTo({top:0,behavior:"smooth"})}return(i,t)=>{const F=E,O=z,h=J,N=K,S=M;return l(),_(S,null,{default:e(()=>[s(F,{text:"Notes",subtitle:" Articles and Advice"}),s(Q,null,{default:e(()=>[s($,null,{default:e(()=>[s(b,{cols:"12",md:"12",lg:"8"},{default:e(()=>[(l(!0),u(k,null,w(m(T),a=>(l(),_($,{key:a.id},{default:e(()=>[s(b,null,{default:e(()=>[s(O,{article:a},null,8,["article"])]),_:2},1024)]),_:2},1024))),128)),n("div",U,[m(d)>0?(l(),_(A,{key:0,variant:"flat",class:"bg-white",onClick:t[0]||(t[0]=a=>v(-5))},{default:e(()=>t[2]||(t[2]=[c("prev")])),_:1})):q("",!0),t[4]||(t[4]=n("span",{class:"ml-5"},null,-1)),m(d)+L<m(R)?(l(),_(A,{key:1,class:"bg-white",variant:"flat",onClick:t[1]||(t[1]=a=>v(5))},{default:e(()=>t[3]||(t[3]=[c("next")])),_:1})):q("",!0)])]),_:1}),s(b,{md:"12",lg:"4"},{default:e(()=>[n("aside",W,[n("section",X,[t[6]||(t[6]=n("h2",{class:"uppercase"},"Recent Posts",-1)),s(N,{query:V},{"not-found":e(()=>t[5]||(t[5]=[n("p",null,"No articles found.",-1)])),default:e(({list:a})=>[n("ul",null,[(l(!0),u(k,null,w(a,g=>(l(),u("li",{key:g._path},[s(h,{to:"/notes"+g._path},{default:e(()=>[c(B(g.title),1)]),_:2},1032,["to"])]))),128))])]),_:1})]),n("section",Y,[t[8]||(t[8]=n("h2",{class:"uppercase"},"Categories",-1)),s(N,{query:V},{"not-found":e(()=>t[7]||(t[7]=[n("p",null,"No categories found.",-1)])),default:e(()=>[n("ul",null,[(l(!0),u(k,null,w(m(D),a=>(l(),u("li",{key:a.path},[s(h,{to:"/notes/categories/"+a.path},{default:e(()=>[c(B(a.title),1)]),_:2},1032,["to"])]))),128))])]),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{dt as default};
//# sourceMappingURL=B2LNJet2.js.map
