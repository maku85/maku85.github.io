{"version":3,"file":"_slug_.BNQLNwcU.js","sources":["../../../../node_modules/.pnpm/@unhead+vue@1.8.10_vue@3.4.19/node_modules/@unhead/vue/dist/index.mjs","../../../../components/Note/ArticleToc.vue","../../../../pages/notes/[lang]/articles/[slug].vue"],"sourcesContent":["import { useScript as useScript$1 } from 'unhead';\nexport { CapoPlugin, HashHydrationPlugin, createHeadCore } from 'unhead';\nimport { V as Vue3, h as headSymbol, i as injectHead } from './shared/vue.cf295fb1.mjs';\nexport { c as createHead, a as createServerHead, r as resolveUnrefHeadInput, s as setHeadInjectionHandler } from './shared/vue.cf295fb1.mjs';\nimport { getCurrentInstance, ref, computed } from 'vue';\nimport { u as useHead } from './shared/vue.f36acd1f.mjs';\nimport { composableNames, whitelistSafeInput, unpackMeta, NetworkEvents } from '@unhead/shared';\n\nconst VueHeadMixin = {\n  created() {\n    let source = false;\n    if (Vue3) {\n      const instance = getCurrentInstance();\n      if (!instance)\n        return;\n      const options = instance.type;\n      if (!options || !(\"head\" in options))\n        return;\n      source = typeof options.head === \"function\" ? () => options.head.call(instance.proxy) : options.head;\n    } else {\n      const head = this.$options.head;\n      if (head) {\n        source = typeof head === \"function\" ? () => head.call(this) : head;\n      }\n    }\n    source && useHead(source);\n  }\n};\n\nconst Vue2ProvideUnheadPlugin = function(_Vue, head) {\n  _Vue.mixin({\n    beforeCreate() {\n      const options = this.$options;\n      const origProvide = options.provide;\n      options.provide = function() {\n        let origProvideResult;\n        if (typeof origProvide === \"function\")\n          origProvideResult = origProvide.call(this);\n        else\n          origProvideResult = origProvide || {};\n        return {\n          ...origProvideResult,\n          [headSymbol]: head\n        };\n      };\n    }\n  });\n};\n\nconst coreComposableNames = [\n  \"injectHead\"\n];\nconst unheadVueComposablesImports = {\n  \"@unhead/vue\": [...coreComposableNames, ...composableNames]\n};\n\nfunction useHeadSafe(input, options = {}) {\n  return useHead(input, { ...options, transform: whitelistSafeInput });\n}\n\nfunction useSeoMeta(input, options) {\n  const { title, titleTemplate, ...meta } = input;\n  return useHead({\n    title,\n    titleTemplate,\n    // @ts-expect-error runtime type\n    _flatMeta: meta\n  }, {\n    ...options,\n    transform(t) {\n      const meta2 = unpackMeta({ ...t._flatMeta });\n      delete t._flatMeta;\n      return {\n        // @ts-expect-error runtime type\n        ...t,\n        meta: meta2\n      };\n    }\n  });\n}\n\nfunction useServerHead(input, options = {}) {\n  const head = options.head || injectHead();\n  delete options.head;\n  if (head)\n    return head.push(input, { ...options, mode: \"server\" });\n}\n\nfunction useServerHeadSafe(input, options = {}) {\n  return useHeadSafe(input, { ...options, mode: \"server\" });\n}\n\nfunction useServerSeoMeta(input, options) {\n  return useSeoMeta(input, { ...options || {}, mode: \"server\" });\n}\n\nfunction useScript(input, _options) {\n  const head = injectHead();\n  const ctx = getCurrentInstance();\n  const options = _options || {};\n  options.head = head;\n  const status = ref(\"awaitingLoad\");\n  NetworkEvents.forEach((fn) => {\n    const _fn = typeof input[fn] === \"function\" ? input[fn].bind(ctx) : null;\n    if (_fn) {\n      input[fn] = (e) => _fn(e);\n    }\n  });\n  options.stub = ({ script, fn }) => {\n    if (fn === \"$script\") {\n      return {\n        ...script,\n        status,\n        loaded: computed(() => status.value === \"loaded\")\n      };\n    }\n  };\n  const instance = useScript$1(input, options);\n  function syncStatus({ script }) {\n    if (script.id === instance.$script.id) {\n      status.value = script.status;\n      if (script.status === \"removed\")\n        head.hooks.removeHook(`script:updated`, syncStatus);\n    }\n  }\n  head.hooks.hook(`script:updated`, syncStatus);\n  return instance;\n}\n\nexport { Vue2ProvideUnheadPlugin, VueHeadMixin, injectHead, unheadVueComposablesImports, useHead, useHeadSafe, useScript, useSeoMeta, useServerHead, useServerHeadSafe, useServerSeoMeta };\n","<script setup>\ndefineProps({\n  links: {\n    type: Array,\n    required: true,\n  },\n});\n\n// flatten TOC links nested arrays to one array\nconst flattenLinks = (links) => {\n  const _links = (links || [])\n    .map((link) => {\n      let _link = [link];\n      if (link.children) {\n        // recursively flatten children links\n        const flattened = flattenLinks(link.children);\n        _link = [link, ...flattened];\n      }\n      return _link;\n    })\n    .flat(1);\n  return _links;\n};\n</script>\n\n<template>\n  <nav class=\"toc\">\n    <header class=\"toc__header\">\n      <h2 class=\"toc__title\">Table of contents</h2>\n    </header>\n\n    <ul class=\"toc__links-container\">\n      <li\n        v-for=\"link of flattenLinks(links)\"\n        :key=\"link.id\"\n        :class=\"`toc__link-wrapper toc__link-wrapper--${link.depth}`\"\n      >\n        <NuxtLink class=\"toc__link\" :to=\"'#' + link.id\">{{ link.text }}</NuxtLink>\n      </li>\n    </ul>\n  </nav>\n</template>\n","<script lang=\"ts\" setup>\nconst route = useRoute();\nconst { lang, slug } = route.params;\nconst { data } = await useAsyncData(`article-${slug}`, async () => {\n  const article = queryContent(lang as string, 'articles')\n    .where({ _path: `/${lang}/articles/${slug}` })\n    .findOne();\n\n  const surround = queryContent()\n    .only(['_path', 'title', 'description'])\n    .sort({ date: 1 })\n    .findSurround(`/${lang}/articles/${slug}`);\n  return {\n    article: await article,\n    surround: await surround,\n  };\n});\nconst article = data?.value?.article;\nconst [prev, next] = data?.value?.surround || [];\n\nuseSeoMeta({\n  title: article?.title,\n  ogTitle: article?.title,\n  description: article?.description,\n  ogDescription: article?.description,\n  ogImage: `https://site.com/${article?.img}`,\n});\n</script>\n\n<template>\n  <v-container id=\"article\" fluid>\n    <ContentRenderer :value=\"article\">\n      <template #empty>\n        <p>No content found.</p>\n      </template>\n\n      <div class=\"article__header\">\n        <div class=\"article__titles\">\n          <div v-if=\"article?.tags.length\" class=\"article__categories_container\">\n            <NuxtLink\n              v-for=\"(tag, index) of article.tags\"\n              :key=\"tag\"\n              class=\"article__category\"\n              :to=\"'/notes/categories/' + tag\"\n            >\n              #{{ tag.toUpperCase() }}{{ index < article.tags.length - 1 ? ',' : '' }}&nbsp;\n            </NuxtLink>\n          </div>\n          <h1 class=\"article__title\">{{ article?.title }}</h1>\n\n          <ContentRendererMarkdown class=\"article__description\" :value=\"article?.excerpt\" />\n        </div>\n      </div>\n\n      <v-row class=\"article__container\">\n        <v-col cols=\"12\" sm=\"12\">\n          <v-row>\n            <v-col\n              v-if=\"article?.body?.toc?.links.length\"\n              cols=\"12\"\n              sm=\"3\"\n              class=\"order-first order-md-last\"\n            >\n              <note-article-toc class=\"toc pl-4 pb-4\" :links=\"article?.body?.toc?.links\" />\n            </v-col>\n\n            <v-col cols=\"12\" sm=\"9\" class=\"order-last order-md-first\">\n              <ContentRendererMarkdown class=\"article__content\" :value=\"article || {}\" />\n\n              <div\n                v-if=\"article?.tags.length\"\n                class=\"article__categories_container d-flex flex-wrap\"\n              >\n                <span class=\"article__categories_label\">Tags:</span>\n                <NuxtLink\n                  v-for=\"tag of article.tags\"\n                  :key=\"tag\"\n                  class=\"article__category\"\n                  :to=\"'/notes/categories/' + tag\"\n                >\n                  {{ tag }}\n                </NuxtLink>\n              </div>\n\n              <div class=\"line-left line-top\">\n                <div class=\"line-block\">\n                  <span></span>\n                </div>\n              </div>\n            </v-col>\n          </v-row>\n        </v-col>\n      </v-row>\n\n      <div class=\"articles__navigation\">\n        <v-container>\n          <note-prev-next :prev=\"prev\" :next=\"next\" />\n        </v-container>\n      </div>\n    </ContentRenderer>\n  </v-container>\n</template>\n"],"names":["useSeoMeta","input","options","title","titleTemplate","meta","useHead","t","meta2","unpackMeta","flattenLinks","links","link","_link","flattened","route","useRoute","lang","slug","data","__temp","__restore","_withAsyncContext","useAsyncData","article","queryContent","surround","_a","prev","next","_b"],"mappings":"0cA4DA,SAASA,GAAWC,EAAOC,EAAS,CAClC,KAAM,CAAE,MAAAC,EAAO,cAAAC,EAAe,GAAGC,CAAI,EAAKJ,EAC1C,OAAOK,GAAQ,CACb,MAAAH,EACA,cAAAC,EAEA,UAAWC,CACf,EAAK,CACD,GAAGH,EACH,UAAUK,EAAG,CACX,MAAMC,EAAQC,EAAW,CAAE,GAAGF,EAAE,SAAW,CAAA,EAC3C,cAAOA,EAAE,UACF,CAEL,GAAGA,EACH,KAAMC,CACd,CACK,CACL,CAAG,CACH,6NCtEA,MAAME,EAAgBC,IACJA,GAAS,CAAE,GACxB,IAAKC,GAAS,CACb,IAAIC,EAAQ,CAACD,CAAI,EACjB,GAAIA,EAAK,SAAU,CAEjB,MAAME,EAAYJ,EAAaE,EAAK,QAAQ,EAC5CC,EAAQ,CAACD,EAAM,GAAGE,CAAS,CAC5B,CACD,OAAOD,CACb,CAAK,EACA,KAAK,CAAC,4tDCnBX,MAAME,EAAQC,IACR,CAAE,KAAAC,EAAM,KAAAC,GAASH,EAAM,OACvB,CAAE,KAAAI,CAAA,GAAe,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAAC,EAAa,WAAWL,CAAI,GAAI,SAAY,CACjE,MAAMM,EAAUC,EAAaR,EAAgB,UAAU,EACpD,MAAM,CAAE,MAAO,IAAIA,CAAI,aAAaC,CAAI,EAAI,CAAA,EAC5C,UAEGQ,EAAWD,IACd,KAAK,CAAC,QAAS,QAAS,aAAa,CAAC,EACtC,KAAK,CAAE,KAAM,EAAG,EAChB,aAAa,IAAIR,CAAI,aAAaC,CAAI,EAAE,EACpC,MAAA,CACL,QAAS,MAAMM,EACf,SAAU,MAAME,CAAA,CAClB,CACD,CAAA,mBACKF,GAAUG,EAAAR,GAAA,YAAAA,EAAM,QAAN,YAAAQ,EAAa,QACvB,CAACC,EAAMC,CAAI,IAAIC,EAAAX,GAAA,YAAAA,EAAM,QAAN,YAAAW,EAAa,WAAY,GAEnC,OAAA9B,GAAA,CACT,MAAOwB,GAAA,YAAAA,EAAS,MAChB,QAASA,GAAA,YAAAA,EAAS,MAClB,YAAaA,GAAA,YAAAA,EAAS,YACtB,cAAeA,GAAA,YAAAA,EAAS,YACxB,QAAS,oBAAoBA,GAAA,YAAAA,EAAS,GAAG,EAAA,CAC1C","x_google_ignoreList":[0]}